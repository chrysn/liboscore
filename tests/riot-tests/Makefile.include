APPLICATION ?= test_$(notdir $(subst -,_,$(patsubst %/,%,$(CURDIR))))

RIOTBASE ?= $(CURDIR)/../RIOT

BOARD ?= native

DEVELHELP ?= 1

# C11 features are accepted in the OSCORE implementation, but that causes
# pedantic Werrors to show up in RIOT source; gnu11 seems to ignore those.
CFLAGS += -std=gnu11

EXTERNAL_MODULE_DIRS += $(abspath ../../..)/backends/riot-module
USEMODULE += oscore

# Pick a backend; without, no algorithms are available
USEMODULE += libcose_crypt_hacl
# That would offer AES-CCM algorithms, but using it requires changing the RIOT
# package to point to the branch at https://github.com/bergzand/libcose/pull/91
# until that is completed and a version including it has been mada available in
# RIOT.
# USEMODULE += libcose_crypt_tinydtls

EXTERNAL_MODULE_DIRS += $(abspath ..)/testwrapper

TESTS = ../test-evaluator.sh

# workarounds for https://github.com/RIOT-OS/RIOT/issues/13121
USEMODULE += gnrc_sock
USEMODULE += gnrc_ipv6

include $(RIOTBASE)/Makefile.include
